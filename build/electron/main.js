(()=>{"use strict";var e={n:o=>{var t=o&&o.__esModule?()=>o.default:()=>o;return e.d(t,{a:t}),t},d:(o,t)=>{for(var r in t)e.o(t,r)&&!e.o(o,r)&&Object.defineProperty(o,r,{enumerable:!0,get:t[r]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o)};const o=require("electron"),t=require("path"),r=require("url"),n=require("electron-log");var s=e.n(n);const a=require("dayjs");var l=e.n(a);const i=require("iohook");var p=e.n(i);const d=require("electron-updater");l()();let c=0,u=!1;p().on("keydown",(()=>{u||(u=!0,c=0)})),process.on("SIGINT",(()=>{p().stop(),updateValues(),process.exit(0)})),p().start();const w=process.argv.slice(1).some((e=>"--serve"===e));let b=null;o.app.allowRendererProcessReuse=!1,o.app.on("ready",(async()=>{try{o.globalShortcut.register("Control+Shift+I",(()=>{b.webContents.isDevToolsOpened()?b.webContents.closeDevTools():b.webContents.openDevTools()}));const e="safe-file-protocol";o.protocol.registerFileProtocol(e,((o,t)=>{const r=o.url.replace(`${e}://`,"");try{return t(decodeURIComponent(r))}catch(e){s().error(e)}})),o.screen.getPrimaryDisplay().workAreaSize,b=new o.BrowserWindow({x:200,y:200,width:414,height:761,webPreferences:{nodeIntegration:!0,allowRunningInsecureContent:!1,contextIsolation:!1,enableRemoteModule:!0,devTools:!0}}),b.setAlwaysOnTop(!0,"floating"),b.setVisibleOnAllWorkspaces(!0),b.setMenuBarVisibility(!1),b.setFullScreenable(!1),b.setResizable(!1),w?b.loadFile(t.join(__dirname,"./../src/index.html")):b.loadURL(r.format({pathname:t.join(__dirname,"./../src/index.html"),protocol:"file:",slashes:!0})),b.on("close",(()=>{p().stop(),b.webContents.isDevToolsOpened()&&b.webContents.closeDevTools()})),b.once("ready-to-show",(()=>{d.autoUpdater.checkForUpdatesAndNotify()})),b.on("closed",(()=>{b=null}))}catch(e){s().error(e),p().stop(),o.app.quit()}})),o.app.once("ready",(()=>{})),o.app.on("window-all-closed",(()=>{"darwin"!==process.platform&&(p().stop(),o.app.quit())})),d.autoUpdater.on("update-available",(()=>{b.webContents.send("update_available")})),d.autoUpdater.on("update-downloaded",(()=>{b.webContents.send("update_downloaded")})),o.ipcMain.on("restart_app",(()=>{d.autoUpdater.quitAndInstall()}))})();
//# sourceMappingURL=main.js.map